# üåÑ Sustainable Process Automation

<p align="center">
  <img src="./robot-mixing-party.jpg" alt="Robot Mixing Party">
  <caption>Generated by Night Cafe</caption>
</p>

## üóìÔ∏è Project Overview

This is a project done by Elkhayat, Youssef (myself), a M.Sc student at the University of Munich, Technische Universit√§t M√ºnchen. The project was done as part of the praktikum [Sustainable Process Automation](https://www.ph.tum.de/academics/org/cc/course/950733595/) with the [Chair of Information Systems and Business Process Management](https://www.cs.cit.tum.de/bpm/chair/) under the supervision of [Mangler, J√ºrgen - Dr. rer. soc. oec.](https://campus.tum.de/tumonline/visitenkarte.show_vcard?pPersonenId=88335AE8FDA7F2B9&pPersonenGruppe=3).

### üìö Project Description

The project was about controlling a mixer connected to a smart socket in a robotic system and showcasing real life scenarios of an orchestration between the robotic arm and the mixer through the BPMs (more on this later).

#### üéõÔ∏è Mixer Control

This was simply done through some APIs provided by a package called [smart-socket-service](https://github.com/ylkhayat/smart-socket-service). Check it out for more thorough explanation of what it can do and how it contributes to the project.

#### ü§ñ UR - Cobot (**Cobi**)

The robotic arm used in this project was the [UR5e](https://www.universal-robots.com/products/ur5-robot/) from Universal Robots. The control of the robotic arm was done through the API provided by Universal Robots and all of the programs of the cobot can be found under the [programs directory](./programs).

The design of this task was split into two main functionalities that the robot had to perform:

- **Intensity Process**: The intensity process is defined in the [intensity-process.xml](./intensity-process.xml) file. It tells **Cobi** which intensity we want to operate our mixer on. The intensity value is set in the `dataelements` section of the XML file.

| Here's the breakdown of the intensity process                                                                                                                                                                                                                                                                                                                                | [ProcessIntensity.urp](./programs/ProcessIntensity.urp)                                                                                                                                                                                                                     |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![Intensity Process Start](./intensity-process-start.gif)                                                                                                                                                                                                                                                                                                                    | `GlobalToControl` is the program that is responsible for **Cobi** to move from the global position to the control position. <br> - `Control` is the position where **Cobi** is ready to operate the mixer's intensity (right above the mixer with some defined safe space). |
| `ControlReset` is the program that is responsible for **Cobi** to reset the intensity of the mixer to zero, to always ensure the setting program to start from zero onwards. (of course this can be done in a more efficient way, to detect the current intensity and move from there accordingly, but for the limited time of the project, we have followed this approach). | ![Intensity Process Reset](./intensity-process-reset.gif)                                                                                                                                                                                                                   |
| ![Intensity Process Set](./intensity-process-set.gif)                                                                                                                                                                                                                                                                                                                        | `ControlSet` is the program that is responsible for **Cobi** to set the intensity of the mixer based on the `mixerintensity` that we called earlier to set the intensity to the integer input number 6 of **Cobi**.                                                         |
| `ControlToGlobal` is the program that is responsible for **Cobi** to move from the control position to the global position.                                                                                                                                                                                                                                                  | ![Intensity Process End](./intensity-process-end.gif)                                                                                                                                                                                                                       |

- **Mixing Process**: The mixing process is defined in the [mixing-process.xml](./mixing-process.xml) file. It includes various endpoints that refer to the UR programs deployed somewhere safe and personally synced in the `programs/` directory.

| Here's the breakdown of the mixing process                                                                                                                                                                                        | [ProcessMixing.urp](./programs/ProcessMixing.urp)                                                                                                                                                                                                                                                                                                               |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![Mixing Process Start](./mixing-process-start.gif)                                                                                                                                                                               | `GlobalToLocal` program consists of the following: <br> - `Global` is the safe position for **Cobi**, or referred to as the rest position. Often **Cobi** is moved to this position when the program is finished or when **Cobi** is not in use. <br> - `Local` is the position where **Cobi** is ready to operate on the mixing for our specific installation. |
| `LocalPickupMixer` is the program responsible for **Cobi** to move from the local position to the pick up position where it picks up the glass and approaches the mixer in a safe manner, where it is then ready to start mixing. | ![Mixing Process Mid](./mixing-process-mid-start.gif)                                                                                                                                                                                                                                                                                                           |
| ![Mixing Process Mid](./mixing-process-mid.gif)                                                                                                                                                                                   | This step is not part of the program but it helps with the visualization. Here the mixing started through API calls to the [smart-socket-service](https://github.com/ylkhayat/smart-socket-service) for a certain period.                                                                                                                                       |
| `MixerPickupLocal` is the program responsible to path back from the mixer ready position, to put back the glass at the pick up position (putdown position) and then proceeds to the local position.                               | ![Mixing Process Mid](./mixing-process-mid-end.gif)                                                                                                                                                                                                                                                                                                             |
| ![Mixing Process End](./mixing-process-end.gif)                                                                                                                                                                                   | `LocalToGlobal` is the program that is responsible for **Cobi** to move from the local position to the global position.                                                                                                                                                                                                                                         |

#### üìà Testets

The BPMs are the Business Process Models that are used to orchestrate the robotic arm and the mixer. The BPMs are defined in the [testsets directory](./testsets). The BPMs are used to define the sequence of the tasks that the robotic arm and the mixer have to perform.

Thanks for checking out our project!!
